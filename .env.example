# Moodle Docker Infrastructure Configuration
# Archivo de ejemplo de configuración
#
# INSTRUCCIONES:
# 1. Copia este archivo a .env: cp .env.example .env
# 2. Edita .env y configura los valores según tus necesidades
# 3. IMPORTANTE: Las contraseñas se generan automáticamente durante la instalación
#    pero puedes personalizarlas aquí si lo prefieres

# ============================================================
# GENERAL
# ============================================================
MOODLE_VERSION='4.5.5'
PROJECT_NAME='moodle_infrastructure'

# ============================================================
# TESTING ENVIRONMENT
# ============================================================
# URL de acceso al ambiente de testing
# IMPORTANTE: Usar HTTP si accedes por localhost/IP
# - Via Apache (recomendado): http://localhost:8080 o http://IP-del-servidor:8080
# - Directo al contenedor: http://localhost:8081
# Usar HTTPS solo si tienes certificados SSL configurados en Apache
TEST_URL='http://localhost:8081'

# Base de datos Testing
TEST_DB_NAME='moodle_test'
TEST_DB_USER='moodle_test_user'
TEST_DB_PASS='GENERAR_CONTRASEÑA_SEGURA'
TEST_DB_ROOT_PASS='GENERAR_CONTRASEÑA_SEGURA'

# Administrador Moodle Testing
TEST_MOODLE_ADMIN_USER='admin_test'
TEST_MOODLE_ADMIN_PASS='GENERAR_CONTRASEÑA_SEGURA'
TEST_MOODLE_ADMIN_EMAIL='admin@test.moodle.local'

# Puertos Testing
# Apache en HOST escucha en 8080, hace proxy a contenedor en 8081
TEST_HTTP_PORT='8081'
TEST_HTTPS_PORT='8443'

# ============================================================
# PRODUCTION ENVIRONMENT
# ============================================================
# URL de acceso al ambiente de producción
# IMPORTANTE: Usar HTTP si accedes por localhost/IP
# - Via Apache (recomendado): http://localhost o http://IP-del-servidor
# - Directo al contenedor: http://localhost:8082
# Usar HTTPS solo si tienes certificados SSL configurados en Apache
PROD_URL='http://localhost'

# Base de datos Production
PROD_DB_NAME='moodle_prod'
PROD_DB_USER='moodle_prod_user'
PROD_DB_PASS='GENERAR_CONTRASEÑA_SEGURA'
PROD_DB_ROOT_PASS='GENERAR_CONTRASEÑA_SEGURA'

# Administrador Moodle Production
PROD_MOODLE_ADMIN_USER='admin'
PROD_MOODLE_ADMIN_PASS='GENERAR_CONTRASEÑA_SEGURA'
PROD_MOODLE_ADMIN_EMAIL='admin@moodle.local'

# Puertos Production
# Apache en HOST escucha en 80, hace proxy a contenedor en 8082
PROD_HTTP_PORT='80'
PROD_HTTPS_PORT='443'

# ============================================================
# APACHE CONFIGURATION
# ============================================================
# Apache corre en el HOST como proxy reverso a los contenedores Moodle
# Testing: Apache escucha en 8080 → Moodle contenedor en 8081
# Production: Apache escucha en 80 → Moodle contenedor en 8082
# Los VirtualHosts se configuran automáticamente durante la instalación

# ============================================================
# SSL CONFIGURATION (para Apache en el HOST)
# ============================================================
# Configuración de certificados SSL en Apache
# Para configurar SSL, usa certbot después de la instalación:
#   sudo certbot --apache -d tusitio.com
#   sudo certbot --apache -d test.tusitio.com
#
# IMPORTANTE: Dejar SSL_FORCE_HTTPS en 'false' hasta configurar certificados válidos
SSL_FORCE_HTTPS='false'

# ============================================================
# BACKUP CONFIGURATION
# ============================================================
# Días de retención de backups (los backups más antiguos se eliminan automáticamente)
BACKUP_RETENTION_DAYS='7'

# Email para notificaciones de backup (dejar vacío para deshabilitar)
BACKUP_EMAIL_TO=''

# ============================================================
# SMTP CONFIGURATION (para notificaciones por email)
# ============================================================
# Configuración del servidor SMTP
SMTP_SERVER='smtp.gmail.com'
SMTP_PORT='465'

# Credenciales SMTP (dejar vacío si no se usan notificaciones)
SMTP_USER=''
SMTP_PASSWORD=''

# Nombre del remitente en los emails
SMTP_FROM_NAME='Moodle Backup System'

# ============================================================
# AUTO-START CONFIGURATION
# ============================================================
# Iniciar contenedores automáticamente al arrancar el sistema
AUTO_START_ON_BOOT='false'

# Instalar Moodle automáticamente (ejecutar instalación web)
AUTO_INSTALL_MOODLE='false'

# Realizar backup automático al iniciar
AUTO_BACKUP_ON_START='true'

# Habilitar monitoreo de servicios
MONITORING_ENABLED='false'
MONITORING_INTERVAL='60'

# ============================================================
# RESOURCE LIMITS
# ============================================================
# MySQL
MYSQL_MAX_CONNECTIONS='200'

# PHP
PHP_MEMORY_LIMIT='512M'
PHP_MAX_EXECUTION_TIME='300'
PHP_UPLOAD_MAX_FILESIZE='100M'
PHP_POST_MAX_SIZE='100M'
